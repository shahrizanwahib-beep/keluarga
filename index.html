<!doctype html>
<html lang="ms">
 <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pengenalan Keluarga - IGCSE Bahasa Melayu</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&amp;display=swap" rel="stylesheet">
  <style>
    body { 
      font-family: 'Inter', system-ui, sans-serif; 
      background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 50%, #fecaca 100%);
      min-height: 100%;
      color: #0f172a; 
      box-sizing: border-box;
    }
    html, body { height: 100%; }
    
    .slide-container { 
      background: transparent;
      padding: 2rem 1rem; 
      margin: 0;
      position: relative;
      max-width: 1400px;
      margin: 0 auto;
    }
    
    .btn { 
      padding: 1rem 2rem; 
      border-radius: 16px; 
      font-weight: 600; 
      cursor: pointer; 
      border: none; 
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-size: 1rem;
      position: relative;
      overflow: hidden;
    }
    
    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }
    
    .btn:hover::before {
      left: 100%;
    }
    
    .btn-primary { 
      background: linear-gradient(135deg, #f97316, #ea580c);
      color: white;
      box-shadow: 0 10px 25px rgba(249, 115, 22, 0.3);
    }
    .btn-primary:hover { 
      transform: translateY(-2px);
      box-shadow: 0 15px 35px rgba(249, 115, 22, 0.4);
    }
    
    .btn-secondary { 
      background: linear-gradient(135deg, #ec4899, #db2777);
      color: white;
      box-shadow: 0 10px 25px rgba(236, 72, 153, 0.3);
    }
    .btn-secondary:hover { 
      transform: translateY(-2px);
      box-shadow: 0 15px 35px rgba(236, 72, 153, 0.4);
    }
    
    .word-card { 
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.3); 
      border-radius: 16px; 
      padding: 1.5rem; 
      margin: 0.75rem; 
      cursor: pointer; 
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .word-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .word-card:hover::before {
      opacity: 1;
    }
    
    .word-card:hover { 
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 20px 40px rgba(0,0,0,0.15);
    }
    
    .category-noun { 
      border-color: #f59e0b; 
      background: linear-gradient(135deg, #fef3c7, #fde68a);
      box-shadow: 0 8px 25px rgba(245, 158, 11, 0.2);
    }
    .category-verb { 
      border-color: #10b981; 
      background: linear-gradient(135deg, #d1fae5, #a7f3d0);
      box-shadow: 0 8px 25px rgba(16, 185, 129, 0.2);
    }
    .category-adjective { 
      border-color: #ec4899; 
      background: linear-gradient(135deg, #fce7f3, #fbcfe8);
      box-shadow: 0 8px 25px rgba(236, 72, 153, 0.2);
    }
    .category-adverb { 
      border-color: #8b5cf6; 
      background: linear-gradient(135deg, #ede9fe, #ddd6fe);
      box-shadow: 0 8px 25px rgba(139, 92, 246, 0.2);
    }
    
    .progress-container {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 0.5rem;
      margin-bottom: 2rem;
      max-width: 1400px;
      margin: 0 auto 2rem auto;
      border: 1px solid rgba(255, 255, 255, 0.3);
    }
    
    .progress-bar {
      background: linear-gradient(90deg, #f97316, #ec4899);
      border-radius: 16px;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 4px 15px rgba(249, 115, 22, 0.3);
    }
    
    .nav-container {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(15px);
      border-radius: 20px;
      padding: 1.5rem;
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      max-width: 1400px;
      margin: 0 auto;
    }
    
    .slide-title {
      background: linear-gradient(135deg, #f97316, #ec4899);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 800;
      text-align: center;
      margin-bottom: 3rem;
      font-size: 4rem;
      line-height: 1.1;
    }
    
    .category-card {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(15px);
      border-radius: 20px;
      padding: 2rem;
      border: 1px solid rgba(255, 255, 255, 0.3);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .category-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      border-radius: 20px 20px 0 0;
    }
    
    .category-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    }
    
    .category-card.noun::before { background: linear-gradient(90deg, #f59e0b, #fbbf24); }
    .category-card.verb::before { background: linear-gradient(90deg, #10b981, #34d399); }
    .category-card.adjective::before { background: linear-gradient(90deg, #ec4899, #f472b6); }
    .category-card.adverb::before { background: linear-gradient(90deg, #8b5cf6, #a78bfa); }
    
    .example-sentence {
      background: rgba(249, 115, 22, 0.1);
      border-left: 4px solid #f97316;
      border-radius: 0 12px 12px 0;
      padding: 1.5rem;
      margin: 1rem 0;
      font-style: italic;
      backdrop-filter: blur(10px);
    }
    
    .interactive-word {
      display: inline-block;
      padding: 0.25rem 0.5rem;
      border-radius: 8px;
      transition: all 0.2s;
      cursor: pointer;
      position: relative;
    }
    
    .interactive-word:hover {
      transform: scale(1.05);
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .animate-fade-in {
      animation: fadeInUp 0.6s ease-out;
    }
    
    .glass-effect {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 16px;
    }
    
    .draggable-textarea {
      position: absolute;
      background: rgba(255, 255, 255, 0.95);
      border: 2px solid #3b82f6;
      border-radius: 8px;
      padding: 8px;
      min-width: 150px;
      min-height: 80px;
      cursor: move;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      z-index: 10;
      resize: both;
      overflow: auto;
    }
    
    .draggable-textarea:hover {
      border-color: #1d4ed8;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
    }
    
    .draggable-textarea textarea {
      width: 100%;
      height: 100%;
      border: none;
      outline: none;
      background: transparent;
      resize: none;
      font-family: 'Inter', sans-serif;
      font-size: 14px;
      line-height: 1.4;
    }
    
    .draggable-textarea .close-btn {
      position: absolute;
      top: -8px;
      right: -8px;
      width: 20px;
      height: 20px;
      background: #ef4444;
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 11;
    }
    
    .draggable-textarea .close-btn:hover {
      background: #dc2626;
    }
    
    .selected-word {
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(249, 115, 22, 0.5);
      border: 3px solid #f97316 !important;
      animation: pulse 1.5s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.8; }
    }

    .family-bg {
      background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 50%, #fecaca 100%);
    }
    
    .family-member-box {
      background: rgba(255, 255, 255, 0.9);
      border: 2px solid #e5e7eb;
      border-radius: 12px;
      padding: 1rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 80px;
      min-height: 80px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    
    .family-member-box:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
      border-color: #f97316;
    }
    
    .family-member-box.edited {
      border-color: #10b981;
      background: linear-gradient(135deg, #d1fae5, #a7f3d0);
    }
    
    .add-sibling-btn, .add-extended-btn, .quick-add-btn {
      background: rgba(249, 115, 22, 0.1);
      border: 2px dashed #f97316;
      border-radius: 12px;
      padding: 1rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 80px;
      min-height: 80px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: #f97316;
      font-weight: 600;
    }
    
    .add-sibling-btn:hover, .add-extended-btn:hover, .quick-add-btn:hover {
      background: rgba(249, 115, 22, 0.2);
      transform: translateY(-2px);
    }
    
    .member-editor-form {
      background: #f8fafc;
      border-radius: 12px;
      padding: 1rem;
      border: 1px solid #e2e8f0;
    }
    
    .form-input {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-size: 0.875rem;
      margin-bottom: 0.5rem;
    }
    
    .form-input:focus {
      outline: none;
      border-color: #f97316;
      box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="min-h-full family-bg">
  <div class="container mx-auto px-4 py-8"><!-- Progress Bar -->
   <div class="progress-container">
    <div id="progress-bar" class="progress-bar h-3" style="width: 8%"></div>
   </div><!-- Main Content -->
   <div id="slide-content" class="slide-container"><!-- Content will be rendered here -->
   </div><!-- Navigation -->
   <div class="nav-container">
    <div class="flex justify-between items-center"><button id="prev-btn" class="btn btn-secondary" onclick="previousSlide()">â† Sebelumnya</button>
     <div class="text-center">
      <div id="slide-counter" class="text-lg font-bold text-gray-800">
       Slaid 1 / 9
      </div>
      <div class="text-sm text-gray-600 mt-1">
       Tekan 'F' untuk skrin penuh â€¢ â† â†’ untuk navigasi
      </div>
     </div><button id="next-btn" class="btn btn-primary" onclick="nextSlide()">Seterusnya â†’</button>
    </div>
   </div>
  </div>
  <script>
    // Configuration
    const defaultConfig = {
      presentation_title: "Pengenalan Keluarga - IGCSE Bahasa Melayu",
      topic_theme: "Keluarga dan Hubungan Kekeluargaan"
    };

    let currentSlide = 0;
    let selectedAnswers = {};

    const slides = [
      {
        title: "Pengenalan Keluarga",
        content: `
          <div class="text-center animate-fade-in">
            <div class="mb-8">
              <div class="inline-block p-4 rounded-full glass-effect mb-6">
                <div class="text-6xl">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
              </div>
            </div>
            <h1 class="slide-title text-8xl mb-8">Keluarga</h1>
            <h2 class="text-6xl mb-12 font-light text-gray-600">Family</h2>
            <div class="max-w-4xl mx-auto p-8">
              <p class="text-3xl text-gray-700 leading-relaxed">Mari belajar tentang ahli keluarga, sifat-sifat mereka, dan aktiviti yang dilakukan bersama-sama!</p>
              <div class="mt-8 p-6 bg-orange-50 rounded-2xl">
                <p class="text-xl text-orange-800"><strong>English:</strong> Let's learn about family members, their characteristics, and activities we do together!</p>
              </div>
              <div class="mt-6 p-4 bg-pink-50 rounded-2xl">
                <p class="text-lg text-pink-700">ğŸ¯ <strong>Untuk pelajar IGCSE Bahasa Melayu Asing (13 tahun)</strong></p>
                <p class="text-md text-pink-600"><em>For IGCSE Foreign Language Malay students (13 years old)</em></p>
              </div>
            </div>
          </div>
        `
      },
      {
        title: "Ahli Keluarga Teras",
        content: `
          <div class="animate-fade-in">
            <h2 class="slide-title text-6xl mb-8">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Ahli Keluarga Teras</h2>
            <div class="text-center mb-8 p-4 bg-white bg-opacity-50 rounded-2xl">
              <p class="text-xl text-gray-700"><strong>English:</strong> Core Family Members</p>
            </div>
            <div class="grid md:grid-cols-2 gap-8">
              <div class="category-card noun">
                <div class="flex items-center mb-4">
                  <div class="text-4xl mr-4">ğŸ‘¨</div>
                  <div>
                    <h3 class="text-4xl font-bold text-yellow-700">Ibu Bapa</h3>
                    <p class="text-xl text-yellow-600">Parents</p>
                  </div>
                </div>
                <div class="flex flex-wrap gap-2">
                  <span class="px-6 py-3 bg-yellow-100 text-yellow-800 rounded-full font-medium text-lg">bapa <small>(father)</small></span>
                  <span class="px-6 py-3 bg-yellow-100 text-yellow-800 rounded-full font-medium text-lg">ibu <small>(mother)</small></span>
                  <span class="px-6 py-3 bg-yellow-100 text-yellow-800 rounded-full font-medium text-lg">ayah <small>(father)</small></span>
                  <span class="px-6 py-3 bg-yellow-100 text-yellow-800 rounded-full font-medium text-lg">emak <small>(mother)</small></span>
                </div>
              </div>
              <div class="category-card noun">
                <div class="flex items-center mb-4">
                  <div class="text-4xl mr-4">ğŸ‘§ğŸ‘¦</div>
                  <div>
                    <h3 class="text-4xl font-bold text-yellow-700">Adik-beradik</h3>
                    <p class="text-xl text-yellow-600">Siblings</p>
                  </div>
                </div>
                <div class="flex flex-wrap gap-2">
                  <span class="px-6 py-3 bg-yellow-100 text-yellow-800 rounded-full font-medium text-lg">abang <small>(elder brother)</small></span>
                  <span class="px-6 py-3 bg-yellow-100 text-yellow-800 rounded-full font-medium text-lg">kakak <small>(elder sister)</small></span>
                  <span class="px-6 py-3 bg-yellow-100 text-yellow-800 rounded-full font-medium text-lg">adik lelaki <small>(younger brother)</small></span>
                  <span class="px-6 py-3 bg-yellow-100 text-yellow-800 rounded-full font-medium text-lg">adik perempuan <small>(younger sister)</small></span>
                </div>
              </div>
              <div class="category-card noun">
                <div class="flex items-center mb-4">
                  <div class="text-4xl mr-4">ğŸ‘´ğŸ‘µ</div>
                  <div>
                    <h3 class="text-4xl font-bold text-yellow-700">Datuk Nenek</h3>
                    <p class="text-xl text-yellow-600">Grandparents</p>
                  </div>
                </div>
                <div class="flex flex-wrap gap-2">
                  <span class="px-6 py-3 bg-yellow-100 text-yellow-800 rounded-full font-medium text-lg">datuk <small>(grandfather)</small></span>
                  <span class="px-6 py-3 bg-yellow-100 text-yellow-800 rounded-full font-medium text-lg">nenek <small>(grandmother)</small></span>
                </div>
              </div>
              <div class="category-card noun">
                <div class="flex items-center mb-4">
                  <div class="text-4xl mr-4">ğŸ‘¨â€ğŸ‘©</div>
                  <div>
                    <h3 class="text-4xl font-bold text-yellow-700">Bapa Mak Saudara</h3>
                    <p class="text-xl text-yellow-600">Aunts & Uncles</p>
                  </div>
                </div>
                <div class="flex flex-wrap gap-2">
                  <span class="px-6 py-3 bg-yellow-100 text-yellow-800 rounded-full font-medium text-lg">bapa saudara <small>(uncle)</small></span>
                  <span class="px-6 py-3 bg-yellow-100 text-yellow-800 rounded-full font-medium text-lg">mak saudara <small>(aunt)</small></span>
                </div>
              </div>
            </div>
          </div>
        `
      },
      {
        title: "Keluarga Besar",
        content: `
          <div class="animate-fade-in">
            <h2 class="slide-title text-5xl mb-6">ğŸ  Keluarga Besar</h2>
            <div class="text-center mb-6 p-4 bg-white bg-opacity-50 rounded-2xl">
              <p class="text-lg text-gray-700"><strong>English:</strong> Extended Family</p>
            </div>
            <div class="grid md:grid-cols-2 gap-6">
              <div class="category-card noun">
                <div class="flex items-center mb-4">
                  <div class="text-3xl mr-3">ğŸ‘¶</div>
                  <div>
                    <h3 class="text-2xl font-bold text-yellow-700">Generasi Muda</h3>
                    <p class="text-lg text-yellow-600">Younger Generation</p>
                  </div>
                </div>
                <div class="space-y-2">
                  <div class="word-card category-noun text-center">
                    <div class="font-bold">sepupu</div>
                    <div class="text-sm text-gray-600">(cousin)</div>
                  </div>
                  <div class="word-card category-noun text-center">
                    <div class="font-bold">cucu</div>
                    <div class="text-sm text-gray-600">(grandchild)</div>
                  </div>
                  <div class="word-card category-noun text-center">
                    <div class="font-bold">cicit</div>
                    <div class="text-sm text-gray-600">(great-grandchild)</div>
                  </div>
                </div>
              </div>
              <div class="category-card noun">
                <div class="flex items-center mb-4">
                  <div class="text-3xl mr-3">ğŸ’‘</div>
                  <div>
                    <h3 class="text-2xl font-bold text-yellow-700">Keluarga Berkahwin</h3>
                    <p class="text-lg text-yellow-600">Married Family</p>
                  </div>
                </div>
                <div class="space-y-2">
                  <div class="word-card category-noun text-center">
                    <div class="font-bold">mentua</div>
                    <div class="text-sm text-gray-600">(parent-in-law)</div>
                  </div>
                  <div class="word-card category-noun text-center">
                    <div class="font-bold">menantu</div>
                    <div class="text-sm text-gray-600">(child-in-law)</div>
                  </div>
                  <div class="word-card category-noun text-center">
                    <div class="font-bold">ipar</div>
                    <div class="text-sm text-gray-600">(sibling-in-law)</div>
                  </div>
                </div>
              </div>
              <div class="category-card noun">
                <div class="flex items-center mb-4">
                  <div class="text-3xl mr-3">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§</div>
                  <div>
                    <h3 class="text-2xl font-bold text-yellow-700">Keluarga Khas</h3>
                    <p class="text-lg text-yellow-600">Special Family</p>
                  </div>
                </div>
                <div class="space-y-2">
                  <div class="word-card category-noun text-center">
                    <div class="font-bold">anak tiri</div>
                    <div class="text-sm text-gray-600">(stepchild)</div>
                  </div>
                  <div class="word-card category-noun text-center">
                    <div class="font-bold">anak angkat</div>
                    <div class="text-sm text-gray-600">(adopted child)</div>
                  </div>
                  <div class="word-card category-noun text-center">
                    <div class="font-bold">saudara</div>
                    <div class="text-sm text-gray-600">(relative)</div>
                  </div>
                </div>
              </div>
              <div class="category-card noun">
                <div class="flex items-center mb-4">
                  <div class="text-3xl mr-3">ğŸ‘¥</div>
                  <div>
                    <h3 class="text-2xl font-bold text-yellow-700">Hubungan Lain</h3>
                    <p class="text-lg text-yellow-600">Other Relations</p>
                  </div>
                </div>
                <div class="space-y-2">
                  <div class="word-card category-noun text-center">
                    <div class="font-bold">biras</div>
                    <div class="text-sm text-gray-600">(spouse's sibling's spouse)</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `
      },
      {
        title: "Sifat Ahli Keluarga",
        content: `
          <div class="animate-fade-in">
            <h2 class="slide-title text-5xl mb-6">ğŸ¨ Sifat Ahli Keluarga</h2>
            <div class="text-center mb-6 p-4 bg-white bg-opacity-50 rounded-2xl">
              <p class="text-lg text-gray-700"><strong>English:</strong> Family Members' Characteristics</p>
            </div>
            <div class="grid md:grid-cols-2 gap-6">
              <div class="category-card adjective">
                <div class="flex items-center mb-4">
                  <div class="text-3xl mr-3">ğŸ’–</div>
                  <div>
                    <h3 class="text-2xl font-bold text-pink-700">Sifat Peribadi</h3>
                    <p class="text-lg text-pink-600">Personality Traits</p>
                  </div>
                </div>
                <div class="space-y-2">
                  <div class="word-card category-adjective text-center">
                    <div class="font-bold">baik hati</div>
                    <div class="text-sm text-gray-600">(kind-hearted)</div>
                  </div>
                  <div class="word-card category-adjective text-center">
                    <div class="font-bold">penyayang</div>
                    <div class="text-sm text-gray-600">(loving)</div>
                  </div>
                  <div class="word-card category-adjective text-center">
                    <div class="font-bold">peramah</div>
                    <div class="text-sm text-gray-600">(friendly)</div>
                  </div>
                  <div class="word-card category-adjective text-center">
                    <div class="font-bold">rajin</div>
                    <div class="text-sm text-gray-600">(hardworking)</div>
                  </div>
                  <div class="word-card category-adjective text-center">
                    <div class="font-bold">pandai</div>
                    <div class="text-sm text-gray-600">(smart)</div>
                  </div>
                </div>
              </div>
              <div class="category-card adjective">
                <div class="flex items-center mb-4">
                  <div class="text-3xl mr-3">ğŸ‘¤</div>
                  <div>
                    <h3 class="text-2xl font-bold text-pink-700">Sifat Fizikal</h3>
                    <p class="text-lg text-pink-600">Physical Traits</p>
                  </div>
                </div>
                <div class="space-y-2">
                  <div class="word-card category-adjective text-center">
                    <div class="font-bold">tinggi</div>
                    <div class="text-sm text-gray-600">(tall)</div>
                  </div>
                  <div class="word-card category-adjective text-center">
                    <div class="font-bold">rendah</div>
                    <div class="text-sm text-gray-600">(short)</div>
                  </div>
                  <div class="word-card category-adjective text-center">
                    <div class="font-bold">gemuk</div>
                    <div class="text-sm text-gray-600">(fat)</div>
                  </div>
                  <div class="word-card category-adjective text-center">
                    <div class="font-bold">kurus</div>
                    <div class="text-sm text-gray-600">(thin)</div>
                  </div>
                  <div class="word-card category-adjective text-center">
                    <div class="font-bold">cantik</div>
                    <div class="text-sm text-gray-600">(beautiful)</div>
                  </div>
                </div>
              </div>
            </div>
            <div class="mt-6 p-4 bg-orange-50 border-l-4 border-orange-400 rounded-r-2xl">
              <p class="text-lg italic">"Bapa saya seorang yang baik hati dan rajin bekerja."</p>
              <p class="text-sm text-orange-600"><em>English: "My father is a kind-hearted and hardworking person."</em></p>
            </div>
          </div>
        `
      },
      {
        title: "Aktiviti Keluarga",
        content: `
          <div class="animate-fade-in">
            <h2 class="slide-title text-5xl mb-6">ğŸ¯ Aktiviti Keluarga</h2>
            <div class="text-center mb-6 p-4 bg-white bg-opacity-50 rounded-2xl">
              <p class="text-lg text-gray-700"><strong>English:</strong> Family Activities</p>
            </div>
            <div class="grid md:grid-cols-2 gap-6">
              <div class="category-card verb">
                <div class="flex items-center mb-4">
                  <div class="text-3xl mr-3">ğŸ½ï¸</div>
                  <div>
                    <h3 class="text-2xl font-bold text-green-700">Aktiviti Harian</h3>
                    <p class="text-lg text-green-600">Daily Activities</p>
                  </div>
                </div>
                <div class="space-y-2">
                  <div class="word-card category-verb text-center">
                    <div class="font-bold">makan bersama-sama</div>
                    <div class="text-sm text-gray-600">(eat together)</div>
                  </div>
                  <div class="word-card category-verb text-center">
                    <div class="font-bold">bercakap</div>
                    <div class="text-sm text-gray-600">(talk)</div>
                  </div>
                  <div class="word-card category-verb text-center">
                    <div class="font-bold">bermain</div>
                    <div class="text-sm text-gray-600">(play)</div>
                  </div>
                  <div class="word-card category-verb text-center">
                    <div class="font-bold">belajar</div>
                    <div class="text-sm text-gray-600">(study)</div>
                  </div>
                  <div class="word-card category-verb text-center">
                    <div class="font-bold">memasak</div>
                    <div class="text-sm text-gray-600">(cook)</div>
                  </div>
                </div>
              </div>
              <div class="category-card verb">
                <div class="flex items-center mb-4">
                  <div class="text-3xl mr-3">ğŸ‰</div>
                  <div>
                    <h3 class="text-2xl font-bold text-green-700">Aktiviti Rekreasi</h3>
                    <p class="text-lg text-green-600">Recreational Activities</p>
                  </div>
                </div>
                <div class="space-y-2">
                  <div class="word-card category-verb text-center">
                    <div class="font-bold">menonton</div>
                    <div class="text-sm text-gray-600">(watch)</div>
                  </div>
                  <div class="word-card category-verb text-center">
                    <div class="font-bold">berjalan-jalan</div>
                    <div class="text-sm text-gray-600">(go for a walk)</div>
                  </div>
                  <div class="word-card category-verb text-center">
                    <div class="font-bold">melawat</div>
                    <div class="text-sm text-gray-600">(visit)</div>
                  </div>
                  <div class="word-card category-verb text-center">
                    <div class="font-bold">berkumpul</div>
                    <div class="text-sm text-gray-600">(gather)</div>
                  </div>
                  <div class="word-card category-verb text-center">
                    <div class="font-bold">bergurau</div>
                    <div class="text-sm text-gray-600">(joke around)</div>
                  </div>
                </div>
              </div>
            </div>
            <div class="mt-6 p-4 bg-orange-50 border-l-4 border-orange-400 rounded-r-2xl">
              <p class="text-lg italic">"Keluarga kami gemar makan bersama-sama pada waktu malam."</p>
              <p class="text-sm text-orange-600"><em>English: "Our family loves to eat together in the evening."</em></p>
            </div>
          </div>
        `
      },
      {
        title: "Aktiviti 1: Padankan Gambar dengan Kata",
        content: `
          <div class="animate-fade-in">
            <h2 class="slide-title text-4xl mb-6">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Aktiviti 1: Padankan Gambar dengan Kata</h2>
            <div class="text-center mb-6 p-4 bg-white bg-opacity-50 rounded-2xl">
              <p class="text-lg text-gray-700"><strong>English:</strong> Activity 1: Match Pictures with Words</p>
              <p class="text-md text-gray-600">ğŸ–±ï¸ Klik kata, kemudian klik gambar yang sesuai (Click word, then click matching picture)</p>
              <p class="text-sm text-orange-600">ğŸ’¡ Tip: Kata yang dipilih akan bersinar oren!</p>
            </div>
            
            <div class="grid lg:grid-cols-2 gap-6">
              <div class="p-4 bg-white bg-opacity-80 rounded-2xl shadow-lg">
                <h3 class="text-xl font-bold mb-4 text-center text-orange-700">ğŸ–¼ï¸ Gambar (Pictures)</h3>
                <div id="all-pictures-grid" class="grid grid-cols-5 gap-3">
                  <!-- All 40 pictures will be loaded here -->
                </div>
              </div>
              
              <div class="p-4 bg-white bg-opacity-80 rounded-2xl shadow-lg">
                <h3 class="text-xl font-bold mb-4 text-center text-green-700">ğŸ“ Kata-kata (Words)</h3>
                <div id="all-word-options" class="grid grid-cols-2 gap-2">
                  <!-- All 40 randomized words will be loaded here -->
                </div>
              </div>
            </div>
            
            <div id="activity1-feedback" class="mt-6 text-center"></div>
            <div class="mt-4 text-center">
              <div id="progress-display" class="text-lg font-bold text-orange-600">Kemajuan: 0 / 40 padanan betul</div>
            </div>
          </div>
        `
      },
      {
        title: "Aktiviti 2: Susun Ayat & Kenal Pasti Kata",
        content: `
          <div class="animate-fade-in">
            <h2 class="slide-title text-3xl mb-4">ğŸ§© Aktiviti 2: Susun Ayat & Kenal Pasti Kata</h2>
            <div class="text-center mb-4 p-3 bg-white bg-opacity-50 rounded-2xl">
              <p class="text-md text-gray-700"><strong>English:</strong> Activity 2: Build Sentences & Identify Words</p>
              <p class="text-sm text-gray-600">Complete all 10 sentence building exercises below</p>
            </div>
            
            <!-- All Sentence Building Exercises -->
            <div class="mb-6 p-4 bg-green-50 bg-opacity-80 rounded-2xl border-2 border-green-200">
              <h3 class="text-xl font-bold mb-3 text-center text-green-700">ğŸ§© Susun Ayat (Build Sentences)</h3>
              <div class="text-center mb-3">
                <div id="sentence-progress" class="text-md font-bold text-green-600">Kemajuan: 0 / 10 ayat siap</div>
              </div>
              
              <div id="all-sentence-exercises" class="space-y-4">
                <!-- All 10 sentence exercises will be loaded here -->
              </div>
            </div>

            <!-- Word Analysis Section -->
            <div class="p-4 bg-purple-50 bg-opacity-80 rounded-2xl border-2 border-purple-200">
              <h3 class="text-xl font-bold mb-3 text-center text-purple-700">ğŸ” Kenal Pasti Jenis Kata</h3>
              <p class="text-center mb-3 text-purple-600 text-sm">Tap pada kata untuk menganalisisnya</p>
              
              <div class="p-3 bg-white rounded-xl mb-4">
                <p class="text-lg mb-3 leading-relaxed text-center" id="sentence-to-analyze">
                  <span class="interactive-word hover:bg-yellow-200 px-3 py-2 rounded cursor-pointer text-base" onclick="analyzeWord('Bapa', 'noun')">Bapa</span>
                  <span class="interactive-word hover:bg-yellow-200 px-3 py-2 rounded cursor-pointer text-base" onclick="analyzeWord('saya', 'noun')">saya</span>
                  <span class="interactive-word hover:bg-yellow-200 px-3 py-2 rounded cursor-pointer text-base" onclick="analyzeWord('seorang', 'noun')">seorang</span>
                  <span class="interactive-word hover:bg-pink-200 px-3 py-2 rounded cursor-pointer text-base" onclick="analyzeWord('yang baik hati', 'adjective')">yang baik hati</span>
                  dan
                  <span class="interactive-word hover:bg-pink-200 px-3 py-2 rounded cursor-pointer text-base" onclick="analyzeWord('rajin', 'adjective')">rajin</span>
                  <span class="interactive-word hover:bg-green-200 px-3 py-2 rounded cursor-pointer text-base" onclick="analyzeWord('bekerja', 'verb')">bekerja</span>.
                </p>
                <p class="text-sm text-center text-gray-600"><em>English: "My father is a kind-hearted and hardworking person."</em></p>
                <div id="word-analysis" class="mt-3"></div>
              </div>
              
              <div class="grid grid-cols-2 gap-3">
                <div class="category-card noun text-center p-4">
                  <div class="text-3xl mb-2">ğŸ·ï¸</div>
                  <div class="font-bold text-yellow-700 text-sm">Kata Nama</div>
                  <div class="text-xs text-yellow-600">Nouns</div>
                  <div id="noun-count" class="text-xs text-yellow-600 mt-1">0 dipilih</div>
                </div>
                <div class="category-card verb text-center p-4">
                  <div class="text-3xl mb-2">âš¡</div>
                  <div class="font-bold text-green-700 text-sm">Kata Kerja</div>
                  <div class="text-xs text-green-600">Verbs</div>
                  <div id="verb-count" class="text-xs text-green-600 mt-1">0 dipilih</div>
                </div>
                <div class="category-card adjective text-center p-4">
                  <div class="text-3xl mb-2">ğŸ¨</div>
                  <div class="font-bold text-pink-700 text-sm">Kata Adjektif</div>
                  <div class="text-xs text-pink-600">Adjectives</div>
                  <div id="adjective-count" class="text-xs text-pink-600 mt-1">0 dipilih</div>
                </div>
                <div class="category-card adverb text-center p-4">
                  <div class="text-3xl mb-2">ğŸ“</div>
                  <div class="font-bold text-purple-700 text-sm">Kata Keterangan</div>
                  <div class="text-xs text-purple-600">Adverbs</div>
                  <div id="adverb-count" class="text-xs text-purple-600 mt-1">0 dipilih</div>
                </div>
              </div>
            </div>
          </div>
        `
      },

      {
        title: "Aktiviti 3: Lukis Pokok Keluarga",
        content: `
          <div class="animate-fade-in">
            <h2 class="slide-title text-4xl mb-4">ğŸ¨ Aktiviti 3: Lukis Pokok Keluarga Anda</h2>
            <div class="text-center mb-4 p-3 bg-white bg-opacity-50 rounded-2xl">
              <p class="text-md text-gray-700"><strong>English:</strong> Activity 3: Draw Your Family Tree</p>
              <p class="text-sm text-gray-600">ğŸ¨ Pilih template dan lukis dengan jari anda! (Choose template and draw with your finger!)</p>
            </div>
            
            <div class="grid lg:grid-cols-3 gap-4">
              <!-- Drawing Tools -->
              <div class="p-4 bg-white bg-opacity-90 rounded-2xl shadow-lg">
                <h3 class="text-lg font-bold mb-4 text-center text-purple-700">ğŸ¨ Alat Lukisan</h3>
                
                <!-- Color Palette -->
                <div class="mt-6">
                  <h4 class="text-sm font-bold mb-3 text-gray-700">ğŸ¨ Warna Lukisan</h4>
                  <div class="grid grid-cols-4 gap-2 mb-3">
                    <button class="color-btn w-8 h-8 rounded-full bg-black border-2 border-gray-300 ring-4 ring-blue-400" onclick="selectDrawingColor('#000000')"></button>
                    <button class="color-btn w-8 h-8 rounded-full bg-red-500 border-2 border-gray-300" onclick="selectDrawingColor('#ef4444')"></button>
                    <button class="color-btn w-8 h-8 rounded-full bg-blue-500 border-2 border-gray-300" onclick="selectDrawingColor('#3b82f6')"></button>
                    <button class="color-btn w-8 h-8 rounded-full bg-green-500 border-2 border-gray-300" onclick="selectDrawingColor('#22c55e')"></button>
                    <button class="color-btn w-8 h-8 rounded-full bg-yellow-500 border-2 border-gray-300" onclick="selectDrawingColor('#eab308')"></button>
                    <button class="color-btn w-8 h-8 rounded-full bg-purple-500 border-2 border-gray-300" onclick="selectDrawingColor('#a855f7')"></button>
                    <button class="color-btn w-8 h-8 rounded-full bg-pink-500 border-2 border-gray-300" onclick="selectDrawingColor('#ec4899')"></button>
                    <button class="color-btn w-8 h-8 rounded-full bg-orange-500 border-2 border-gray-300" onclick="selectDrawingColor('#f97316')"></button>
                  </div>
                  <!-- More Colors Row -->
                  <div class="grid grid-cols-4 gap-2 mb-3">
                    <button class="color-btn w-8 h-8 rounded-full bg-cyan-500 border-2 border-gray-300" onclick="selectDrawingColor('#06b6d4')"></button>
                    <button class="color-btn w-8 h-8 rounded-full bg-indigo-500 border-2 border-gray-300" onclick="selectDrawingColor('#6366f1')"></button>
                    <button class="color-btn w-8 h-8 rounded-full bg-lime-500 border-2 border-gray-300" onclick="selectDrawingColor('#84cc16')"></button>
                    <button class="color-btn w-8 h-8 rounded-full bg-rose-500 border-2 border-gray-300" onclick="selectDrawingColor('#f43f5e')"></button>
                    <button class="color-btn w-8 h-8 rounded-full bg-amber-500 border-2 border-gray-300" onclick="selectDrawingColor('#f59e0b')"></button>
                    <button class="color-btn w-8 h-8 rounded-full bg-teal-500 border-2 border-gray-300" onclick="selectDrawingColor('#14b8a6')"></button>
                    <button class="color-btn w-8 h-8 rounded-full bg-violet-500 border-2 border-gray-300" onclick="selectDrawingColor('#8b5cf6')"></button>
                    <button class="color-btn w-8 h-8 rounded-full bg-emerald-500 border-2 border-gray-300" onclick="selectDrawingColor('#10b981')"></button>
                  </div>
                  <!-- Pastel Colors Row -->
                  <div class="grid grid-cols-4 gap-2">
                    <button class="color-btn w-8 h-8 rounded-full border-2 border-gray-300" style="background-color: #ffc0cb" onclick="selectDrawingColor('#ffc0cb')"></button>
                    <button class="color-btn w-8 h-8 rounded-full border-2 border-gray-300" style="background-color: #add8e6" onclick="selectDrawingColor('#add8e6')"></button>
                    <button class="color-btn w-8 h-8 rounded-full border-2 border-gray-300" style="background-color: #98fb98" onclick="selectDrawingColor('#98fb98')"></button>
                    <button class="color-btn w-8 h-8 rounded-full border-2 border-gray-300" style="background-color: #f0e68c" onclick="selectDrawingColor('#f0e68c')"></button>
                    <button class="color-btn w-8 h-8 rounded-full border-2 border-gray-300" style="background-color: #dda0dd" onclick="selectDrawingColor('#dda0dd')"></button>
                    <button class="color-btn w-8 h-8 rounded-full border-2 border-gray-300" style="background-color: #ffd4c4" onclick="selectDrawingColor('#ffd4c4')"></button>
                    <button class="color-btn w-8 h-8 rounded-full border-2 border-gray-300" style="background-color: #e6e6fa" onclick="selectDrawingColor('#e6e6fa')"></button>
                    <button class="color-btn w-8 h-8 rounded-full bg-white border-2 border-gray-400" onclick="selectDrawingColor('#ffffff')"></button>
                  </div>
                </div>
                
                <!-- Brush Size -->
                <div class="mt-4">
                  <h4 class="text-sm font-bold mb-2 text-gray-700">âœï¸ Saiz Berus</h4>
                  <input type="range" id="brush-size" min="2" max="20" value="5" class="w-full" onchange="setBrushSize(this.value)">
                  <div class="text-xs text-center text-gray-600 mt-1">Saiz: <span id="brush-size-display">5</span>px</div>
                </div>
                
                <!-- Quick Labels -->
                <div class="mt-6">
                  <h4 class="text-sm font-bold mb-2 text-gray-700">ğŸ·ï¸ Label Pantas:</h4>
                  <div class="grid grid-cols-2 gap-2 text-xs">
                    <button class="label-btn p-2 bg-yellow-100 border border-yellow-300 rounded-lg hover:bg-yellow-200" onclick="addTextToCanvas('Datuk')">ğŸ‘´ Datuk</button>
                    <button class="label-btn p-2 bg-yellow-100 border border-yellow-300 rounded-lg hover:bg-yellow-200" onclick="addTextToCanvas('Nenek')">ğŸ‘µ Nenek</button>
                    <button class="label-btn p-2 bg-blue-100 border border-blue-300 rounded-lg hover:bg-blue-200" onclick="addTextToCanvas('Bapa')">ğŸ‘¨ Bapa</button>
                    <button class="label-btn p-2 bg-blue-100 border border-blue-300 rounded-lg hover:bg-blue-200" onclick="addTextToCanvas('Ibu')">ğŸ‘© Ibu</button>
                    <button class="label-btn p-2 bg-green-100 border border-green-300 rounded-lg hover:bg-green-200" onclick="addTextToCanvas('Abang')">ğŸ‘¦ Abang</button>
                    <button class="label-btn p-2 bg-green-100 border border-green-300 rounded-lg hover:bg-green-200" onclick="addTextToCanvas('Kakak')">ğŸ‘§ Kakak</button>
                    <button class="label-btn p-2 bg-pink-100 border border-pink-300 rounded-lg hover:bg-pink-200" onclick="addTextToCanvas('Adik')">ğŸ‘¶ Adik</button>
                    <button class="label-btn p-2 bg-purple-100 border border-purple-300 rounded-lg hover:bg-purple-200" onclick="addTextToCanvas('Saya')">ğŸ§‘ Saya</button>
                  </div>
                </div>
                
                <!-- Text Area Only -->
                <div class="mt-4">
                  <h4 class="text-sm font-bold mb-2 text-gray-700">ğŸ“ Kotak Teks:</h4>
                  <button class="w-full btn btn-secondary text-xs py-2" onclick="addTextArea()">ğŸ“ Tambah Kotak Teks</button>
                </div>
                
                <!-- Emoji Stickers -->
                <div class="mt-4">
                  <h4 class="text-sm font-bold mb-2 text-gray-700">ğŸ˜Š Emoji:</h4>
                  <div class="grid grid-cols-4 gap-2">
                    <button class="emoji-btn p-2 text-2xl hover:bg-gray-100 rounded-lg" onclick="addEmojiToCanvas('â¤ï¸')">â¤ï¸</button>
                    <button class="emoji-btn p-2 text-2xl hover:bg-gray-100 rounded-lg" onclick="addEmojiToCanvas('ğŸŒŸ')">ğŸŒŸ</button>
                    <button class="emoji-btn p-2 text-2xl hover:bg-gray-100 rounded-lg" onclick="addEmojiToCanvas('ğŸŒ¸')">ğŸŒ¸</button>
                    <button class="emoji-btn p-2 text-2xl hover:bg-gray-100 rounded-lg" onclick="addEmojiToCanvas('ğŸˆ')">ğŸˆ</button>
                  </div>
                </div>
              </div>
              
              <!-- Drawing Canvas - Now Much Larger -->
              <div class="lg:col-span-2 p-4 bg-white bg-opacity-90 rounded-2xl shadow-lg">
                <div class="flex justify-between items-center mb-4">
                  <h3 class="text-xl font-bold text-green-700">ğŸ¨ Canvas Lukisan</h3>
                  <div class="space-x-2">
                    <button class="btn btn-secondary text-xs px-3 py-2" onclick="undoDrawing()">â†¶ Undo</button>
                    <button class="btn btn-secondary text-xs px-3 py-2" onclick="clearCanvas()">ğŸ—‘ï¸ Clear</button>
                    <button class="btn btn-primary text-xs px-3 py-2" onclick="saveDrawing()">ğŸ’¾ Simpan</button>
                  </div>
                </div>
                
                <div class="relative border-4 border-green-300 rounded-xl overflow-hidden" style="background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 50%, #fecaca 100%);">
                  <canvas id="family-tree-canvas" width="800" height="600" class="block cursor-crosshair touch-none w-full"></canvas>
                </div>
                
                <!-- Drawing Tools -->
                <div class="mt-4 flex justify-center space-x-2">
                  <button class="tool-btn btn btn-primary text-xs px-3 py-2" onclick="setDrawingMode('draw')" id="draw-btn">âœï¸ Lukis</button>
                  <button class="tool-btn btn btn-secondary text-xs px-3 py-2" onclick="setDrawingMode('erase')" id="erase-btn">ğŸ§½ Padam</button>
                  <button class="tool-btn btn btn-secondary text-xs px-3 py-2" onclick="setDrawingMode('text')" id="text-btn">ğŸ“ Teks</button>
                </div>
              </div>
            </div>
            
            <div id="family-tree-feedback" class="mt-4 text-center"></div>
          </div>
        `
      },
      {
        title: "Tahniah!",
        content: `
          <div class="text-center animate-fade-in">
            <div class="mb-8">
              <div class="inline-block p-6 rounded-full glass-effect mb-6">
                <div class="text-8xl">ğŸ‰</div>
              </div>
            </div>
            <h2 class="slide-title text-5xl mb-6">Tahniah!</h2>
            <div class="max-w-3xl mx-auto glass-effect p-6 rounded-2xl mb-10">
              <p class="text-2xl text-gray-700 leading-relaxed">Anda telah berjaya mempelajari tentang keluarga dalam bahasa Melayu!</p>
              <p class="text-lg text-gray-600 mt-4"><em>You have successfully learned about family in Malay language!</em></p>
            </div>
            
            <div class="grid md:grid-cols-2 gap-8 mb-10">
              <div class="category-card">
                <div class="text-center mb-4">
                  <div class="text-4xl mb-2">ğŸŒŸ</div>
                  <h3 class="text-2xl font-bold text-green-700">Pencapaian Hari Ini</h3>
                  <p class="text-lg text-green-600"><em>Today's Achievements</em></p>
                </div>
                <ul class="text-left space-y-3">
                  <li class="flex items-center"><span class="text-green-500 mr-3">âœ…</span> 40 kata berkaitan keluarga</li>
                  <li class="flex items-center"><span class="text-green-500 mr-3">âœ…</span> Sifat-sifat ahli keluarga</li>
                  <li class="flex items-center"><span class="text-green-500 mr-3">âœ…</span> Aktiviti keluarga</li>
                  <li class="flex items-center"><span class="text-green-500 mr-3">âœ…</span> Jenis kata dalam konteks keluarga</li>
                </ul>
              </div>
              <div class="category-card">
                <div class="text-center mb-4">
                  <div class="text-4xl mb-2">ğŸš€</div>
                  <h3 class="text-2xl font-bold text-orange-700">Langkah Seterusnya</h3>
                  <p class="text-lg text-orange-600"><em>Next Steps</em></p>
                </div>
                <ul class="text-left space-y-3">
                  <li class="flex items-center"><span class="text-orange-500 mr-3">ğŸ“</span> Tulis karangan tentang keluarga</li>
                  <li class="flex items-center"><span class="text-orange-500 mr-3">ğŸ—£ï¸</span> Perkenalkan keluarga kepada rakan</li>
                  <li class="flex items-center"><span class="text-orange-500 mr-3">ğŸ“š</span> Belajar topik seterusnya</li>
                  <li class="flex items-center"><span class="text-orange-500 mr-3">ğŸ¯</span> Latihan IGCSE berkaitan keluarga</li>
                </ul>
              </div>
            </div>
            
            <button class="btn btn-primary text-xl px-10 py-4" onclick="restartPresentation()">
              ğŸ”„ Ulang Semula Pembelajaran
            </button>
          </div>
        `
      }
    ];

    let wordCounts = {
      noun: 0,
      verb: 0,
      adjective: 0,
      adverb: 0
    };

    let draggedElement = null;
    let sentenceWords = [];
    let currentExercise = 0;
    let currentSentenceExercise = 0;

    // Exercise data for Activity 1 - Family themed
    const matchingExercises = [
      {
        pictures: [
          { emoji: "ğŸ‘¨", answer: "bapa", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "ğŸ‘©", answer: "ibu", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "ğŸ‘¦", answer: "abang", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "ğŸ‘§", answer: "kakak", type: "noun", hint: "Drop kata nama di sini" }
        ],
        words: [
          { word: "bapa", translation: "father", type: "noun" },
          { word: "ibu", translation: "mother", type: "noun" },
          { word: "abang", translation: "elder brother", type: "noun" },
          { word: "kakak", translation: "elder sister", type: "noun" }
        ]
      },
      {
        pictures: [
          { emoji: "ğŸ‘¶", answer: "adik lelaki", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "ğŸ‘§", answer: "adik perempuan", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "ğŸ‘´", answer: "datuk", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "ğŸ‘µ", answer: "nenek", type: "noun", hint: "Drop kata nama di sini" }
        ],
        words: [
          { word: "adik lelaki", translation: "younger brother", type: "noun" },
          { word: "adik perempuan", translation: "younger sister", type: "noun" },
          { word: "datuk", translation: "grandfather", type: "noun" },
          { word: "nenek", translation: "grandmother", type: "noun" }
        ]
      },
      {
        pictures: [
          { emoji: "ğŸ‘¨â€ğŸ¦²", answer: "bapa saudara", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "ğŸ‘©â€ğŸ¦±", answer: "mak saudara", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "ğŸ‘«", answer: "sepupu", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "ğŸ‘¶", answer: "cucu", type: "noun", hint: "Drop kata nama di sini" }
        ],
        words: [
          { word: "bapa saudara", translation: "uncle", type: "noun" },
          { word: "mak saudara", translation: "aunt", type: "noun" },
          { word: "sepupu", translation: "cousin", type: "noun" },
          { word: "cucu", translation: "grandchild", type: "noun" }
        ]
      },
      {
        pictures: [
          { emoji: "ğŸ’‘", answer: "mentua", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "ğŸ‘°", answer: "menantu", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "ğŸ‘«", answer: "ipar", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§", answer: "anak tiri", type: "noun", hint: "Drop kata nama di sini" }
        ],
        words: [
          { word: "mentua", translation: "parent-in-law", type: "noun" },
          { word: "menantu", translation: "child-in-law", type: "noun" },
          { word: "ipar", translation: "sibling-in-law", type: "noun" },
          { word: "anak tiri", translation: "stepchild", type: "noun" }
        ]
      },
      {
        pictures: [
          { emoji: "ğŸ’–", answer: "baik hati", type: "adjective", hint: "Drop kata adjektif di sini" },
          { emoji: "ğŸ¤—", answer: "penyayang", type: "adjective", hint: "Drop kata adjektif di sini" },
          { emoji: "ğŸ˜Š", answer: "peramah", type: "adjective", hint: "Drop kata adjektif di sini" },
          { emoji: "ğŸ’ª", answer: "rajin", type: "adjective", hint: "Drop kata adjektif di sini" }
        ],
        words: [
          { word: "baik hati", translation: "kind-hearted", type: "adjective" },
          { word: "penyayang", translation: "loving", type: "adjective" },
          { word: "peramah", translation: "friendly", type: "adjective" },
          { word: "rajin", translation: "hardworking", type: "adjective" }
        ]
      },
      {
        pictures: [
          { emoji: "ğŸ§ ", answer: "pandai", type: "adjective", hint: "Drop kata adjektif di sini" },
          { emoji: "ğŸ“", answer: "tinggi", type: "adjective", hint: "Drop kata adjektif di sini" },
          { emoji: "ğŸ“", answer: "rendah", type: "adjective", hint: "Drop kata adjektif di sini" },
          { emoji: "ğŸŒŸ", answer: "cantik", type: "adjective", hint: "Drop kata adjektif di sini" }
        ],
        words: [
          { word: "pandai", translation: "smart", type: "adjective" },
          { word: "tinggi", translation: "tall", type: "adjective" },
          { word: "rendah", translation: "short", type: "adjective" },
          { word: "cantik", translation: "beautiful", type: "adjective" }
        ]
      },
      {
        pictures: [
          { emoji: "ğŸ½ï¸", answer: "makan bersama-sama", type: "verb", hint: "Drop kata kerja di sini" },
          { emoji: "ğŸ’¬", answer: "bercakap", type: "verb", hint: "Drop kata kerja di sini" },
          { emoji: "ğŸ®", answer: "bermain", type: "verb", hint: "Drop kata kerja di sini" },
          { emoji: "ğŸ“š", answer: "belajar", type: "verb", hint: "Drop kata kerja di sini" }
        ],
        words: [
          { word: "makan bersama-sama", translation: "eat together", type: "verb" },
          { word: "bercakap", translation: "talk", type: "verb" },
          { word: "bermain", translation: "play", type: "verb" },
          { word: "belajar", translation: "study", type: "verb" }
        ]
      },
      {
        pictures: [
          { emoji: "ğŸ³", answer: "memasak", type: "verb", hint: "Drop kata kerja di sini" },
          { emoji: "ğŸ“º", answer: "menonton", type: "verb", hint: "Drop kata kerja di sini" },
          { emoji: "ğŸš¶", answer: "berjalan-jalan", type: "verb", hint: "Drop kata kerja di sini" },
          { emoji: "ğŸ ", answer: "melawat", type: "verb", hint: "Drop kata kerja di sini" }
        ],
        words: [
          { word: "memasak", translation: "cook", type: "verb" },
          { word: "menonton", translation: "watch", type: "verb" },
          { word: "berjalan-jalan", translation: "go for a walk", type: "verb" },
          { word: "melawat", translation: "visit", type: "verb" }
        ]
      },
      {
        pictures: [
          { emoji: "ğŸ‘¥", answer: "berkumpul", type: "verb", hint: "Drop kata kerja di sini" },
          { emoji: "ğŸ˜‚", answer: "bergurau", type: "verb", hint: "Drop kata kerja di sini" },
          { emoji: "ğŸƒ", answer: "gemuk", type: "adjective", hint: "Drop kata adjektif di sini" },
          { emoji: "ğŸ¥¢", answer: "kurus", type: "adjective", hint: "Drop kata adjektif di sini" }
        ],
        words: [
          { word: "berkumpul", translation: "gather", type: "verb" },
          { word: "bergurau", translation: "joke around", type: "verb" },
          { word: "gemuk", translation: "fat", type: "adjective" },
          { word: "kurus", translation: "thin", type: "adjective" }
        ]
      },
      {
        pictures: [
          { emoji: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦", answer: "anak angkat", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "ğŸ‘¥", answer: "saudara", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "ğŸ‘¶", answer: "cicit", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "ğŸ’‘", answer: "biras", type: "noun", hint: "Drop kata nama di sini" }
        ],
        words: [
          { word: "anak angkat", translation: "adopted child", type: "noun" },
          { word: "saudara", translation: "relative", type: "noun" },
          { word: "cicit", translation: "great-grandchild", type: "noun" },
          { word: "biras", translation: "spouse's sibling's spouse", type: "noun" }
        ]
      }
    ];

    // Sentence exercises for Activity 2 - Family themed with corrected Malay
    const sentenceExercises = [
      {
        target: "Bapa saya seorang yang baik hati dan rajin bekerja.",
        english: "My father is a kind-hearted and hardworking person.",
        words: ["Bapa", "saya", "seorang", "yang baik hati", "dan", "rajin", "bekerja"],
        translations: ["father", "my", "a person", "kind-hearted", "and", "hardworking", "work"]
      },
      {
        target: "Nenek gemar memasak makanan yang sedap untuk cucu.",
        english: "Grandmother loves to cook delicious food for grandchildren.",
        words: ["Nenek", "gemar", "memasak", "makanan", "yang sedap", "untuk", "cucu"],
        translations: ["grandmother", "loves", "cook", "food", "delicious", "for", "grandchildren"]
      },
      {
        target: "Adik perempuan suka bermain dengan mainan barunya.",
        english: "Younger sister likes to play with her new toys.",
        words: ["Adik perempuan", "suka", "bermain", "dengan", "mainan", "barunya"],
        translations: ["younger sister", "likes", "play", "with", "toys", "her new"]
      },
      {
        target: "Keluarga kami makan bersama-sama pada waktu malam.",
        english: "Our family eats together at night time.",
        words: ["Keluarga", "kami", "makan bersama-sama", "pada", "waktu malam"],
        translations: ["family", "our", "eat together", "at", "night time"]
      },
      {
        target: "Datuk yang tinggi dan pandai bercakap dengan cucu.",
        english: "The tall and smart grandfather talks with grandchildren.",
        words: ["Datuk", "yang tinggi", "dan", "pandai", "bercakap", "dengan", "cucu"],
        translations: ["grandfather", "tall", "and", "smart", "talks", "with", "grandchildren"]
      },
      {
        target: "Ibu penyayang memasak makanan untuk keluarga setiap hari.",
        english: "The loving mother cooks food for the family every day.",
        words: ["Ibu", "penyayang", "memasak", "makanan", "untuk", "keluarga", "setiap hari"],
        translations: ["mother", "loving", "cooks", "food", "for", "family", "every day"]
      },
      {
        target: "Abang rajin belajar di bilik dengan adik lelaki.",
        english: "Elder brother studies diligently in the room with younger brother.",
        words: ["Abang", "rajin", "belajar", "di", "bilik", "dengan", "adik lelaki"],
        translations: ["elder brother", "diligently", "studies", "in", "room", "with", "younger brother"]
      },
      {
        target: "Kakak cantik menonton televisyen bersama sepupu pada petang.",
        english: "Beautiful elder sister watches television with cousin in the evening.",
        words: ["Kakak", "cantik", "menonton", "televisyen", "bersama", "sepupu", "pada petang"],
        translations: ["elder sister", "beautiful", "watches", "television", "with", "cousin", "in evening"]
      },
      {
        target: "Bapa saudara peramah melawat keluarga kami setiap minggu.",
        english: "The friendly uncle visits our family every week.",
        words: ["Bapa saudara", "peramah", "melawat", "keluarga", "kami", "setiap minggu"],
        translations: ["uncle", "friendly", "visits", "family", "our", "every week"]
      },
      {
        target: "Mak saudara yang rendah bergurau dengan anak-anak kecil.",
        english: "The short aunt jokes around with small children.",
        words: ["Mak saudara", "yang rendah", "bergurau", "dengan", "anak-anak kecil"],
        translations: ["aunt", "short", "jokes around", "with", "small children"]
      }
    ];

    function renderSlide() {
      const slideContent = document.getElementById('slide-content');
      slideContent.innerHTML = slides[currentSlide].content;
      
      // Update progress
      const progress = ((currentSlide + 1) / slides.length) * 100;
      document.getElementById('progress-bar').style.width = `${progress}%`;
      
      // Update counter
      document.getElementById('slide-counter').textContent = `Slaid ${currentSlide + 1} / ${slides.length}`;
      
      // Update navigation buttons
      document.getElementById('prev-btn').disabled = currentSlide === 0;
      document.getElementById('next-btn').disabled = currentSlide === slides.length - 1;
      
      if (currentSlide === slides.length - 1) {
        document.getElementById('next-btn').textContent = 'Tamat';
      } else {
        document.getElementById('next-btn').textContent = 'Seterusnya â†’';
      }

      // Initialize drag and drop for activities
      setTimeout(() => {
        if (currentSlide === 5) { // Activity 1
          loadAllMatchingExercises();
        } else if (currentSlide === 6) { // Activity 2
          loadAllSentenceExercises();
        } else if (currentSlide === 7) { // Activity 3 - Family Tree
          initializeFamilyTree();
        }
        initializeDragAndDrop();
      }, 100);
    }

    function loadAllMatchingExercises() {
      const pictureGrid = document.getElementById('all-pictures-grid');
      const wordOptions = document.getElementById('all-word-options');
      
      if (!pictureGrid || !wordOptions) return;
      
      // Collect all pictures and words
      let allPictures = [];
      let allWords = [];
      
      matchingExercises.forEach((exercise, exerciseIndex) => {
        exercise.pictures.forEach((pic, picIndex) => {
          allPictures.push({
            ...pic,
            id: `ex${exerciseIndex}_pic${picIndex}`
          });
        });
        
        exercise.words.forEach((word, wordIndex) => {
          allWords.push({
            ...word,
            id: `ex${exerciseIndex}_word${wordIndex}`
          });
        });
      });
      
      // Randomize the words array
      allWords = shuffleArray(allWords);
      
      // Load all pictures
      pictureGrid.innerHTML = '';
      allPictures.forEach(pic => {
        const colorClass = pic.type === 'noun' ? 'border-yellow-300' :
                          pic.type === 'verb' ? 'border-green-300' :
                          pic.type === 'adjective' ? 'border-pink-300' : 'border-purple-300';
        
        const div = document.createElement('div');
        div.className = `drop-zone p-3 border-2 border-dashed ${colorClass} rounded-lg text-center bg-white`;
        div.dataset.answer = pic.answer;
        div.dataset.id = pic.id;
        div.innerHTML = `
          <div class="text-3xl mb-1">${pic.emoji}</div>
          <div class="text-xs text-gray-600">${pic.type === 'noun' ? 'Kata Nama' : 
                                                pic.type === 'verb' ? 'Kata Kerja' :
                                                pic.type === 'adjective' ? 'Kata Adjektif' : 'Kata Keterangan'}</div>
        `;
        pictureGrid.appendChild(div);
      });
      
      // Load all randomized words
      wordOptions.innerHTML = '';
      allWords.forEach(word => {
        const colorClass = word.type === 'noun' ? 'bg-yellow-100 border-yellow-300 text-yellow-800' :
                          word.type === 'verb' ? 'bg-green-100 border-green-300 text-green-800' :
                          word.type === 'adjective' ? 'bg-pink-100 border-pink-300 text-pink-800' : 
                          'bg-purple-100 border-purple-300 text-purple-800';
        
        const div = document.createElement('div');
        div.className = `draggable-word p-2 ${colorClass} border-2 rounded-lg text-center cursor-move hover:shadow-lg transition-all text-sm h-16 flex flex-col justify-center`;
        div.draggable = true;
        div.dataset.word = word.word;
        div.dataset.id = word.id;
        div.innerHTML = `
          <div class="font-bold">${word.word}</div>
          <div class="text-xs opacity-75">(${word.translation})</div>
        `;
        wordOptions.appendChild(div);
      });
      
      // Clear feedback
      const feedback = document.getElementById('activity1-feedback');
      if (feedback) feedback.innerHTML = '';
    }

    // Shuffle array function
    function shuffleArray(array) {
      const shuffled = [...array];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }

    function loadAllSentenceExercises() {
      const container = document.getElementById('all-sentence-exercises');
      
      if (!container) return;
      
      container.innerHTML = '';
      
      sentenceExercises.forEach((exercise, index) => {
        // Randomize words for each exercise
        const randomizedWords = shuffleArray([...exercise.words]);
        const randomizedTranslations = randomizedWords.map(word => {
          const originalIndex = exercise.words.indexOf(word);
          return exercise.translations[originalIndex];
        });
        
        const exerciseDiv = document.createElement('div');
        exerciseDiv.className = 'p-3 bg-white rounded-xl border-2 border-green-200';
        exerciseDiv.innerHTML = `
          <div class="mb-3">
            <h4 class="text-md font-bold text-green-700 mb-2">Sentence ${index + 1}:</h4>
            <p class="text-xs text-orange-600"><em>English: "${exercise.english}"</em></p>
          </div>
          
          <div class="space-y-3">
            <div>
              <h5 class="text-sm font-bold mb-2 text-yellow-700">Available Words:</h5>
              <div class="sentence-word-bank-${index} grid grid-cols-2 gap-2">
                ${randomizedWords.map((word, wordIndex) => `
                  <div class="sentence-word p-3 bg-yellow-100 border-2 border-yellow-300 rounded-lg text-center cursor-pointer hover:shadow-lg transition-all text-sm min-h-16 flex flex-col justify-center" 
                       draggable="true" 
                       data-word="${word}" 
                       data-exercise="${index}">
                    <div class="font-bold text-xs">${word}</div>
                    <div class="text-xs text-gray-600">(${randomizedTranslations[wordIndex]})</div>
                  </div>
                `).join('')}
              </div>
            </div>
            
            <div>
              <h5 class="text-sm font-bold mb-2 text-green-700">Sentence Box:</h5>
              <div class="sentence-builder-${index} min-h-20 p-3 border-2 border-dashed border-green-300 rounded-lg bg-gray-50 mb-3" 
                   data-exercise="${index}">
                <div class="text-gray-400 text-center text-xs">Click words to add them here</div>
              </div>
              <button class="w-full btn btn-primary text-xs py-3" onclick="checkIndividualSentence(${index})">Check Sentence ${index + 1}</button>
            </div>
          </div>
          
          <div class="sentence-feedback-${index} mt-3"></div>
        `;
        
        container.appendChild(exerciseDiv);
      });
    }

    let selectedWord = null;

    function initializeDragAndDrop() {
      // Activity 1: Click-based matching (easier for iPad)
      const clickableWords = document.querySelectorAll('.draggable-word');
      const dropZones = document.querySelectorAll('.drop-zone');

      // Add click handlers to words
      clickableWords.forEach(word => {
        word.addEventListener('click', (e) => {
          // Clear previous selection
          clickableWords.forEach(w => w.classList.remove('selected-word'));
          
          // Select this word - handle both direct click and nested elements
          const wordElement = e.target.closest('.draggable-word');
          selectedWord = wordElement.dataset.word;
          wordElement.classList.add('selected-word');
          
          // Show feedback
          showWordSelectionFeedback(selectedWord);
        });
      });

      // Add click handlers to picture zones
      dropZones.forEach(zone => {
        zone.addEventListener('click', (e) => {
          if (!selectedWord) {
            showNoWordSelectedFeedback();
            return;
          }
          
          const correctAnswer = zone.dataset.answer;
          
          if (selectedWord === correctAnswer && !zone.dataset.completed) {
            const originalEmoji = zone.querySelector('div').textContent;
            zone.innerHTML = `
              <div class="text-2xl mb-1">${originalEmoji}</div>
              <div class="text-sm font-bold text-green-600">${selectedWord} âœ“</div>
              <div class="text-xs text-green-500">Betul!</div>
            `;
            zone.style.backgroundColor = '#dcfce7';
            zone.style.borderColor = '#16a34a';
            zone.dataset.completed = 'true';
            
            // Hide the used word
            const usedWordElement = document.querySelector(`[data-word="${selectedWord}"]`);
            if (usedWordElement) {
              usedWordElement.style.opacity = '0.3';
              usedWordElement.style.pointerEvents = 'none';
              usedWordElement.classList.remove('selected-word');
            }
            
            selectedWord = null;
            completedMatches++;
            updateMatchingProgress();
            clearWordSelectionFeedback();
          } else if (zone.dataset.completed) {
            showAlreadyCompletedFeedback();
          } else {
            zone.style.backgroundColor = '#fef2f2';
            zone.style.borderColor = '#dc2626';
            showWrongMatchFeedback();
            setTimeout(() => {
              zone.style.backgroundColor = 'white';
              zone.style.borderColor = zone.classList.contains('border-yellow-300') ? '#fde047' : 
                                      zone.classList.contains('border-green-300') ? '#86efac' :
                                      zone.classList.contains('border-pink-300') ? '#f9a8d4' : '#c4b5fd';
            }, 1000);
          }
        });
      });

      // Activity 2: Click-based sentence building (easier for iPad)
      const sentenceWords = document.querySelectorAll('.sentence-word');
      const sentenceBuilders = document.querySelectorAll('[class*="sentence-builder-"]');

      // Add click handlers to sentence words
      sentenceWords.forEach(word => {
        word.addEventListener('click', (e) => {
          const wordElement = e.target.closest('.sentence-word');
          const wordText = wordElement.dataset.word;
          const exerciseIndex = wordElement.dataset.exercise;
          const builder = document.querySelector(`.sentence-builder-${exerciseIndex}`);
          
          // Clear placeholder text if present
          if (builder.querySelector('.text-gray-400')) {
            builder.innerHTML = '';
          }
          
          // Add word to sentence builder
          const wordSpan = document.createElement('span');
          wordSpan.className = 'inline-block m-1 p-2 bg-orange-100 border border-orange-300 rounded-lg cursor-pointer text-sm';
          wordSpan.textContent = wordText;
          wordSpan.onclick = () => {
            wordSpan.remove();
            if (builder.children.length === 0) {
              builder.innerHTML = '<div class="text-gray-400 text-center text-sm">Click words to add them here</div>';
            }
            
            // Re-enable the word in word bank
            wordElement.style.opacity = '1';
            wordElement.style.pointerEvents = 'auto';
          };
          
          builder.appendChild(wordSpan);
          
          // Disable the word in word bank
          wordElement.style.opacity = '0.5';
          wordElement.style.pointerEvents = 'none';
        });

        // Keep drag functionality as backup
        word.addEventListener('dragstart', (e) => {
          draggedElement = e.target;
          e.dataTransfer.setData('text/plain', e.target.dataset.word);
          e.dataTransfer.setData('exercise', e.target.dataset.exercise);
        });
      });

      // Keep drag and drop functionality for sentence builders as backup
      sentenceBuilders.forEach(builder => {
        builder.addEventListener('dragover', (e) => {
          e.preventDefault();
          builder.style.backgroundColor = '#fff7ed';
        });

        builder.addEventListener('dragleave', (e) => {
          builder.style.backgroundColor = '#f9fafb';
        });

        builder.addEventListener('drop', (e) => {
          e.preventDefault();
          builder.style.backgroundColor = '#f9fafb';
          
          const droppedWord = e.dataTransfer.getData('text/plain');
          const exerciseIndex = e.dataTransfer.getData('exercise');
          const builderExercise = builder.dataset.exercise;
          
          // Only allow words from the same exercise
          if (exerciseIndex !== builderExercise) {
            return;
          }
          
          if (builder.querySelector('.text-gray-400')) {
            builder.innerHTML = '';
          }
          
          const wordElement = document.createElement('span');
          wordElement.className = 'inline-block m-1 p-2 bg-orange-100 border border-orange-300 rounded-lg cursor-pointer text-sm';
          wordElement.textContent = droppedWord;
          wordElement.onclick = () => {
            wordElement.remove();
            if (builder.children.length === 0) {
              builder.innerHTML = '<div class="text-gray-400 text-center text-sm">Click words to add them here</div>';
            }
            
            // Re-enable the word in word bank
            const wordBank = document.querySelector(`.sentence-word-bank-${builderExercise}`);
            const words = wordBank.querySelectorAll('.sentence-word');
            words.forEach(w => {
              if (w.dataset.word === droppedWord) {
                w.style.opacity = '1';
                w.style.pointerEvents = 'auto';
              }
            });
          };
          
          builder.appendChild(wordElement);
          
          if (draggedElement) {
            draggedElement.style.opacity = '0.5';
            draggedElement.style.pointerEvents = 'none';
          }
        });
      });
    }

    let completedSentences = 0;
    let completedMatches = 0;

    function checkIndividualSentence(exerciseIndex) {
      const sentenceBuilder = document.querySelector(`.sentence-builder-${exerciseIndex}`);
      const words = Array.from(sentenceBuilder.children).map(child => child.textContent);
      const currentExerciseData = sentenceExercises[exerciseIndex];
      const targetWords = currentExerciseData.words;
      
      const feedback = document.querySelector(`.sentence-feedback-${exerciseIndex}`);
      
      if (words.length === 0) {
        feedback.innerHTML = `
          <div class="p-3 bg-yellow-100 border-2 border-yellow-300 rounded-lg">
            <p class="text-yellow-700 text-sm">Please click words to the sentence box first.</p>
          </div>
        `;
        return;
      }
      
      if (JSON.stringify(words) === JSON.stringify(targetWords)) {
        feedback.innerHTML = `
          <div class="p-3 bg-green-100 border-2 border-green-300 rounded-lg">
            <div class="text-2xl mb-1">ğŸ‰</div>
            <h3 class="text-lg font-bold text-green-700 mb-1">Perfect!</h3>
            <p class="text-sm text-green-600">Sentence ${exerciseIndex + 1} is correct and complete!</p>
          </div>
        `;
        
        // Mark as completed and update progress
        if (!sentenceBuilder.dataset.completed) {
          sentenceBuilder.dataset.completed = 'true';
          completedSentences++;
          updateSentenceProgress();
        }
      } else {
        feedback.innerHTML = `
          <div class="p-3 bg-red-100 border-2 border-red-300 rounded-lg">
            <h3 class="text-md font-bold text-red-700 mb-1">Try again!</h3>
            <p class="text-sm text-red-600">Word order is not correct. Click on words to remove them.</p>
          </div>
        `;
      }
    }

    function updateSentenceProgress() {
      const progressDisplay = document.getElementById('sentence-progress');
      if (progressDisplay) {
        progressDisplay.textContent = `Progress: ${completedSentences} / 10 sentences completed`;
        
        if (completedSentences === 10) {
          progressDisplay.innerHTML = `
            <div class="text-2xl text-green-600">ğŸ‰ Congratulations! All 10 sentences completed!</div>
          `;
        }
      }
    }

    function updateMatchingProgress() {
      const progressDisplay = document.getElementById('progress-display');
      if (progressDisplay) {
        progressDisplay.textContent = `Kemajuan: ${completedMatches} / 40 padanan betul`;
        
        if (completedMatches === 40) {
          const feedback = document.getElementById('activity1-feedback');
          feedback.innerHTML = `
            <div class="p-6 bg-green-100 border-2 border-green-300 rounded-2xl">
              <div class="text-4xl mb-2">ğŸ‰</div>
              <h3 class="text-2xl font-bold text-green-700 mb-2">Tahniah! (Congratulations!)</h3>
              <p class="text-lg text-green-600">Anda telah berjaya padankan semua 40 kata dengan gambar yang betul!</p>
              <p class="text-md text-green-500">You have successfully matched all 40 words with the correct pictures!</p>
            </div>
          `;
        }
      }
    }

    function showWordSelectionFeedback(word) {
      const feedback = document.getElementById('activity1-feedback');
      feedback.innerHTML = `
        <div class="p-4 bg-orange-100 border-2 border-orange-300 rounded-xl">
          <p class="text-orange-700 font-bold">âœ¨ Kata dipilih: "${word}"</p>
          <p class="text-orange-600 text-sm">Sekarang klik pada gambar yang sesuai!</p>
          <p class="text-orange-500 text-xs"><em>Word selected: "${word}" - Now click on the matching picture!</em></p>
        </div>
      `;
    }

    function showNoWordSelectedFeedback() {
      const feedback = document.getElementById('activity1-feedback');
      feedback.innerHTML = `
        <div class="p-4 bg-yellow-100 border-2 border-yellow-300 rounded-xl">
          <p class="text-yellow-700 font-bold">âš ï¸ Pilih kata terlebih dahulu!</p>
          <p class="text-yellow-600 text-sm">Klik pada kata yang anda mahu padankan.</p>
          <p class="text-yellow-500 text-xs"><em>Please select a word first by clicking on it!</em></p>
        </div>
      `;
    }

    function showWrongMatchFeedback() {
      const feedback = document.getElementById('activity1-feedback');
      feedback.innerHTML = `
        <div class="p-4 bg-red-100 border-2 border-red-300 rounded-xl">
          <p class="text-red-700 font-bold">âŒ Tidak tepat!</p>
          <p class="text-red-600 text-sm">Cuba pilih gambar yang lain.</p>
          <p class="text-red-500 text-xs"><em>Not correct! Try selecting a different picture.</em></p>
        </div>
      `;
    }

    function showAlreadyCompletedFeedback() {
      const feedback = document.getElementById('activity1-feedback');
      feedback.innerHTML = `
        <div class="p-4 bg-gray-100 border-2 border-gray-300 rounded-xl">
          <p class="text-gray-700 font-bold">â„¹ï¸ Sudah siap!</p>
          <p class="text-gray-600 text-sm">Gambar ini sudah ada padanannya.</p>
          <p class="text-gray-500 text-xs"><em>This picture already has its match!</em></p>
        </div>
      `;
    }

    function clearWordSelectionFeedback() {
      const feedback = document.getElementById('activity1-feedback');
      feedback.innerHTML = '';
    }

    function nextSlide() {
      if (currentSlide < slides.length - 1) {
        currentSlide++;
        renderSlide();
      }
    }

    function previousSlide() {
      if (currentSlide > 0) {
        currentSlide--;
        renderSlide();
      }
    }

    function analyzeWord(word, type) {
      const analysisDiv = document.getElementById('word-analysis');
      const typeNames = {
        noun: 'Kata Nama',
        verb: 'Kata Kerja', 
        adjective: 'Kata Adjektif',
        adverb: 'Kata Keterangan'
      };
      
      const colors = {
        noun: 'yellow',
        verb: 'green',
        adjective: 'pink',
        adverb: 'purple'
      };
      
      const explanations = {
        'Bapa': 'Kata nama - ahli keluarga lelaki yang menjadi bapa',
        'saya': 'Kata nama ganti - merujuk kepada diri sendiri',
        'seorang': 'Kata nama - satu orang individu',
        'yang baik hati': 'Kata adjektif - sifat yang menggambarkan peribadi yang baik',
        'rajin': 'Kata adjektif - sifat yang menunjukkan kerajinan',
        'bekerja': 'Kata kerja - aktiviti mencari rezeki atau melakukan tugas'
      };
      
      wordCounts[type]++;
      updateWordCounts();
      
      analysisDiv.innerHTML = `
        <div class="p-4 bg-${colors[type]}-100 border border-${colors[type]}-300 rounded-lg">
          <h4 class="font-bold text-${colors[type]}-800 mb-2">${typeNames[type]}: "${word}"</h4>
          <p class="text-${colors[type]}-700">${explanations[word]}</p>
        </div>
      `;
    }

    function updateWordCounts() {
      document.getElementById('noun-count').textContent = `${wordCounts.noun} dipilih`;
      document.getElementById('verb-count').textContent = `${wordCounts.verb} dipilih`;
      document.getElementById('adjective-count').textContent = `${wordCounts.adjective} dipilih`;
      document.getElementById('adverb-count').textContent = `${wordCounts.adverb} dipilih`;
    }

    function restartPresentation() {
      currentSlide = 0;
      wordCounts = { noun: 0, verb: 0, adjective: 0, adverb: 0 };
      completedSentences = 0;
      completedMatches = 0;
      renderSlide();
    }

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight') nextSlide();
      if (e.key === 'ArrowLeft') previousSlide();
      if (e.key === 'f' || e.key === 'F') toggleFullscreen();
    });

    function toggleFullscreen() {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen().catch(err => {
          console.log('Cannot enter fullscreen mode');
        });
      } else {
        document.exitFullscreen();
      }
    }

    // Initialize Element SDK
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig: defaultConfig,
        onConfigChange: async (config) => {
          // Update presentation title if needed
          if (currentSlide === 0) {
            renderSlide();
          }
        },
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.primary_color || '#f97316',
              set: (value) => {
                window.elementSdk.setConfig({ primary_color: value });
              }
            },
            {
              get: () => config.secondary_color || '#ec4899',
              set: (value) => {
                window.elementSdk.setConfig({ secondary_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || 'system-ui',
            set: (value) => {
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (config) => new Map([
          ['presentation_title', config.presentation_title || defaultConfig.presentation_title],
          ['topic_theme', config.topic_theme || defaultConfig.topic_theme]
        ])
      });
    }

    // Drawing Canvas Variables
    let canvas = null;
    let ctx = null;
    let isDrawing = false;
    let currentColor = '#000000';
    let currentBrushSize = 5;
    let drawingMode = 'draw';
    let drawingHistory = [];
    let historyStep = -1;
    let selectedTemplate = 'blank';
    let textAreas = [];
    let draggedTextArea = null;
    let isDraggingTextArea = false;
    let dragOffset = { x: 0, y: 0 };

    // Family Tree Functions
    function initializeFamilyTree() {
      initializeCanvas();
    }

    function initializeCanvas() {
      canvas = document.getElementById('family-tree-canvas');
      if (!canvas) return;
      
      ctx = canvas.getContext('2d');
      ctx.lineCap = 'round';
      ctx.lineJoin = 'round';
      
      // Set canvas background
      ctx.fillStyle = '#ffffff';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      // Save initial state
      saveState();
      
      // Touch events for iPad
      canvas.addEventListener('touchstart', startDrawing, { passive: false });
      canvas.addEventListener('touchmove', draw, { passive: false });
      canvas.addEventListener('touchend', stopDrawing, { passive: false });
      
      // Mouse events for desktop
      canvas.addEventListener('mousedown', startDrawing);
      canvas.addEventListener('mousemove', draw);
      canvas.addEventListener('mouseup', stopDrawing);
      canvas.addEventListener('mouseout', stopDrawing);
      canvas.addEventListener('click', handleCanvasClick);
    }

    function getEventPos(e) {
      const rect = canvas.getBoundingClientRect();
      const scaleX = canvas.width / rect.width;
      const scaleY = canvas.height / rect.height;
      
      let clientX, clientY;
      
      if (e.touches && e.touches[0]) {
        clientX = e.touches[0].clientX;
        clientY = e.touches[0].clientY;
      } else {
        clientX = e.clientX;
        clientY = e.clientY;
      }
      
      return {
        x: (clientX - rect.left) * scaleX,
        y: (clientY - rect.top) * scaleY
      };
    }

    function startDrawing(e) {
      e.preventDefault();
      const pos = getEventPos(e);
      
      // Check if we're clicking on text for dragging
      const clickedText = getTextAtPosition(pos.x, pos.y);
      if (clickedText) {
        isDraggingText = true;
        draggedText = clickedText;
        canvas.style.cursor = 'move';
        return;
      }
      
      isDrawing = true;
      
      if (drawingMode === 'draw') {
        ctx.globalCompositeOperation = 'source-over';
        ctx.strokeStyle = currentColor;
        ctx.lineWidth = currentBrushSize;
        ctx.beginPath();
        ctx.moveTo(pos.x, pos.y);
      } else if (drawingMode === 'erase') {
        // Use white color to erase by painting white over existing content
        ctx.globalCompositeOperation = 'source-over';
        ctx.strokeStyle = '#ffffff';
        ctx.lineWidth = currentBrushSize * 2;
        ctx.beginPath();
        ctx.moveTo(pos.x, pos.y);
      } else if (drawingMode === 'text') {
        // Text mode will be handled by click
        isDrawing = false;
        return;
      }
    }

    function draw(e) {
      e.preventDefault();
      const pos = getEventPos(e);
      
      // Handle text dragging
      if (isDraggingText && draggedText) {
        draggedText.x = pos.x;
        draggedText.y = pos.y;
        redrawCanvas();
        return;
      }
      
      if (!isDrawing) return;
      
      ctx.lineTo(pos.x, pos.y);
      ctx.stroke();
    }

    function stopDrawing(e) {
      e.preventDefault();
      
      // Handle text dragging end
      if (isDraggingText) {
        isDraggingText = false;
        draggedText = null;
        // Reset cursor based on current mode
        if (drawingMode === 'draw') {
          canvas.style.cursor = 'crosshair';
        } else if (drawingMode === 'erase') {
          canvas.style.cursor = 'grab';
        } else if (drawingMode === 'text') {
          canvas.style.cursor = 'text';
        }
        saveState();
        return;
      }
      
      if (!isDrawing) return;
      
      isDrawing = false;
      ctx.beginPath();
      saveState();
    }

    function selectDrawingColor(color) {
      currentColor = color;
      
      // Update UI
      document.querySelectorAll('.color-btn').forEach(btn => {
        btn.classList.remove('ring-4', 'ring-blue-400');
      });
      
      event.target.classList.add('ring-4', 'ring-blue-400');
      
      // Update all existing text areas with new color
      textAreas.forEach(ta => {
        const textarea = ta.element.querySelector('textarea');
        if (textarea) {
          textarea.style.color = currentColor;
        }
      });
    }

    function setBrushSize(size) {
      currentBrushSize = parseInt(size);
      document.getElementById('brush-size-display').textContent = size;
    }

    function setDrawingMode(mode) {
      drawingMode = mode;
      
      // Update UI
      document.querySelectorAll('.tool-btn').forEach(btn => {
        btn.classList.remove('btn-primary');
        btn.classList.add('btn-secondary');
      });
      
      const modeBtn = document.getElementById(mode + '-btn');
      if (modeBtn) {
        modeBtn.classList.remove('btn-secondary');
        modeBtn.classList.add('btn-primary');
      }
      
      // Change cursor and reset canvas state
      if (mode === 'draw') {
        canvas.style.cursor = 'crosshair';
        if (ctx) {
          ctx.globalCompositeOperation = 'source-over';
          ctx.strokeStyle = currentColor;
          ctx.lineWidth = currentBrushSize;
        }
      } else if (mode === 'erase') {
        canvas.style.cursor = 'crosshair';
        if (ctx) {
          // Use white color to "erase" by drawing white over existing content
          ctx.globalCompositeOperation = 'source-over';
          ctx.strokeStyle = '#ffffff';
          ctx.lineWidth = currentBrushSize * 2;
        }
      } else if (mode === 'text') {
        canvas.style.cursor = 'text';
        if (ctx) {
          ctx.globalCompositeOperation = 'source-over';
        }
      }
    }

    // Canvas is now always blank - no templates needed

    let draggedText = null;
    let isDraggingText = false;
    let textElements = [];

    function addTextToCanvas(text) {
      if (!ctx) return;
      
      // Add text at center of canvas with drag capability
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      
      // Create text element object
      const textElement = {
        text: text,
        x: centerX,
        y: centerY,
        color: currentColor,
        font: '16px Inter, sans-serif',
        id: Date.now() + Math.random()
      };
      
      textElements.push(textElement);
      redrawCanvas();
      saveState();
      showFamilyTreeFeedback(`âœï¸ "${text}" ditambah ke canvas! Klik dan seret untuk mengalih.`, 'success');
    }

    function redrawCanvas() {
      if (!ctx || !canvas) return;
      
      // Clear canvas
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // Set white background
      ctx.fillStyle = '#ffffff';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      // Redraw all text elements
      textElements.forEach(textEl => {
        ctx.save();
        ctx.font = textEl.font;
        ctx.fillStyle = textEl.color;
        ctx.textAlign = 'center';
        ctx.fillText(textEl.text, textEl.x, textEl.y);
        ctx.restore();
      });
    }

    function getTextAtPosition(x, y) {
      // Check if click is near any text element
      for (let i = textElements.length - 1; i >= 0; i--) {
        const textEl = textElements[i];
        const textWidth = ctx.measureText(textEl.text).width;
        const textHeight = 20; // Approximate text height
        
        if (x >= textEl.x - textWidth/2 - 10 && 
            x <= textEl.x + textWidth/2 + 10 &&
            y >= textEl.y - textHeight/2 - 5 && 
            y <= textEl.y + textHeight/2 + 5) {
          return textEl;
        }
      }
      return null;
    }



    function addEmojiToCanvas(emoji) {
      if (!ctx) return;
      
      // Add emoji at center of canvas with drag capability
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      
      // Create emoji element object
      const emojiElement = {
        text: emoji,
        x: centerX,
        y: centerY,
        color: '#000000',
        font: '24px Arial',
        id: Date.now() + Math.random()
      };
      
      textElements.push(emojiElement);
      redrawCanvas();
      saveState();
      showFamilyTreeFeedback(`ğŸ˜Š ${emoji} ditambah ke canvas! Klik dan seret untuk mengalih.`, 'success');
    }

    function addTextArea() {
      const canvasContainer = canvas.parentElement;
      const canvasRect = canvas.getBoundingClientRect();
      
      // Create draggable textarea element
      const textAreaDiv = document.createElement('div');
      textAreaDiv.className = 'draggable-textarea';
      textAreaDiv.style.left = '50px';
      textAreaDiv.style.top = '50px';
      
      const textAreaId = 'textarea-' + Date.now();
      textAreaDiv.innerHTML = `
        <button class="close-btn" onclick="removeTextArea('${textAreaId}')" title="Tutup kotak teks">Ã—</button>
        <textarea placeholder="Tulis di sini..." style="color: ${currentColor}"></textarea>
      `;
      
      textAreaDiv.id = textAreaId;
      
      // Add drag functionality
      let isDragging = false;
      let startX, startY, initialLeft, initialTop;
      
      textAreaDiv.addEventListener('mousedown', (e) => {
        if (e.target.tagName === 'TEXTAREA') return; // Don't drag when typing
        
        isDragging = true;
        startX = e.clientX;
        startY = e.clientY;
        initialLeft = parseInt(textAreaDiv.style.left);
        initialTop = parseInt(textAreaDiv.style.top);
        
        textAreaDiv.style.zIndex = '20';
        e.preventDefault();
      });
      
      document.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        
        const deltaX = e.clientX - startX;
        const deltaY = e.clientY - startY;
        
        textAreaDiv.style.left = (initialLeft + deltaX) + 'px';
        textAreaDiv.style.top = (initialTop + deltaY) + 'px';
      });
      
      document.addEventListener('mouseup', () => {
        if (isDragging) {
          isDragging = false;
          textAreaDiv.style.zIndex = '10';
        }
      });
      
      // Touch events for mobile
      textAreaDiv.addEventListener('touchstart', (e) => {
        if (e.target.tagName === 'TEXTAREA') return;
        
        isDragging = true;
        const touch = e.touches[0];
        startX = touch.clientX;
        startY = touch.clientY;
        initialLeft = parseInt(textAreaDiv.style.left);
        initialTop = parseInt(textAreaDiv.style.top);
        
        textAreaDiv.style.zIndex = '20';
        e.preventDefault();
      }, { passive: false });
      
      document.addEventListener('touchmove', (e) => {
        if (!isDragging) return;
        
        const touch = e.touches[0];
        const deltaX = touch.clientX - startX;
        const deltaY = touch.clientY - startY;
        
        textAreaDiv.style.left = (initialLeft + deltaX) + 'px';
        textAreaDiv.style.top = (initialTop + deltaY) + 'px';
        
        e.preventDefault();
      }, { passive: false });
      
      document.addEventListener('touchend', () => {
        if (isDragging) {
          isDragging = false;
          textAreaDiv.style.zIndex = '10';
        }
      });
      
      // Update text color when color changes
      const textarea = textAreaDiv.querySelector('textarea');
      textarea.style.color = currentColor;
      
      canvasContainer.appendChild(textAreaDiv);
      textAreas.push({ id: textAreaId, element: textAreaDiv });
      
      showFamilyTreeFeedback('ğŸ“ Kotak teks ditambah! Seret untuk mengalih, taip untuk menulis.', 'success');
    }

    function removeTextArea(textAreaId) {
      const textAreaElement = document.getElementById(textAreaId);
      if (textAreaElement) {
        textAreaElement.remove();
        textAreas = textAreas.filter(ta => ta.id !== textAreaId);
        showFamilyTreeFeedback('ğŸ—‘ï¸ Kotak teks dibuang!', 'info');
      }
    }

    function saveState() {
      historyStep++;
      if (historyStep < drawingHistory.length) {
        drawingHistory.length = historyStep;
      }
      drawingHistory.push(canvas.toDataURL());
    }

    function undoDrawing() {
      if (historyStep > 0) {
        historyStep--;
        const img = new Image();
        img.onload = function() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.drawImage(img, 0, 0);
        };
        img.src = drawingHistory[historyStep];
        showFamilyTreeFeedback('â†¶ Undo dilakukan!', 'info');
      } else {
        showFamilyTreeFeedback('Tiada lagi langkah untuk di-undo!', 'warning');
      }
    }

    function clearCanvas() {
      if (!ctx || !canvas) return;
      
      try {
        // Clear the canvas completely
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // Set white background
        ctx.save();
        ctx.fillStyle = '#ffffff';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.restore();
        
        // Reset drawing state
        ctx.globalCompositeOperation = 'source-over';
        ctx.strokeStyle = currentColor;
        ctx.lineWidth = currentBrushSize;
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';
        
        // Clear history and reset
        drawingHistory = [];
        historyStep = -1;
        
        // Clear text elements
        textElements = [];
        
        // Remove all text areas
        textAreas.forEach(ta => {
          if (ta.element && ta.element.parentNode) {
            ta.element.remove();
          }
        });
        textAreas = [];
        
        // Save the blank state
        saveState();
        
        showFamilyTreeFeedback('ğŸ—‘ï¸ Canvas dan semua kotak teks telah dikosongkan!', 'info');
      } catch (error) {
        console.error('Error clearing canvas:', error);
        showFamilyTreeFeedback('âŒ Error membersihkan canvas. Cuba refresh halaman.', 'error');
      }
    }

    function saveDrawing() {
      if (!canvas) return;
      
      // Create download link
      const link = document.createElement('a');
      link.download = 'pokok-keluarga-saya.png';
      link.href = canvas.toDataURL();
      link.click();
      
      showFamilyTreeFeedback('ğŸ’¾ Lukisan pokok keluarga telah disimpan!', 'success');
    }

    function shareDrawing() {
      if (!canvas) return;
      
      canvas.toBlob(function(blob) {
        if (navigator.share) {
          const file = new File([blob], 'pokok-keluarga-saya.png', { type: 'image/png' });
          navigator.share({
            title: 'Pokok Keluarga Saya',
            text: 'Lihat pokok keluarga yang saya lukis!',
            files: [file]
          }).then(() => {
            showFamilyTreeFeedback('ğŸ“¤ Lukisan telah dikongsi!', 'success');
          }).catch(() => {
            showFamilyTreeFeedback('Kongsi tidak berjaya. Cuba simpan dan kongsi secara manual.', 'warning');
          });
        } else {
          showFamilyTreeFeedback('Fungsi kongsi tidak disokong. Sila simpan dan kongsi secara manual.', 'info');
        }
      });
    }



    function showFamilyTreeFeedback(message, type) {
      const feedback = document.getElementById('family-tree-feedback');
      const colors = {
        success: 'bg-green-100 border-green-300 text-green-700',
        warning: 'bg-yellow-100 border-yellow-300 text-yellow-700',
        info: 'bg-blue-100 border-blue-300 text-blue-700',
        error: 'bg-red-100 border-red-300 text-red-700'
      };
      
      feedback.innerHTML = `
        <div class="p-4 ${colors[type]} border-2 rounded-xl">
          <p class="font-bold">${message}</p>
        </div>
      `;
      
      setTimeout(() => {
        feedback.innerHTML = '';
      }, 3000);
    }

    function clearFamilyTreeFeedback() {
      const feedback = document.getElementById('family-tree-feedback');
      if (feedback) {
        feedback.innerHTML = '';
      }
    }

    // Additional canvas helper functions
    function resetCanvasState() {
      if (ctx) {
        ctx.globalCompositeOperation = 'source-over';
        ctx.strokeStyle = currentColor;
        ctx.lineWidth = currentBrushSize;
      }
    }

    function handleCanvasClick(e) {
      // Canvas click handling for future features
    }

    // Initialize
    renderSlide();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99679bdee1a84a9b',t:'MTc2MTc5MjY2NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>